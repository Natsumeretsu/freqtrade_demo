# 信息论、信号与系统视角下的加密市场（单交易对时间序列主线）

更新日期：2026-01-15

本文目标：

1. 把“信息论指标”（Shannon 熵、Transfer Entropy 等）翻译成**单交易对时间序列**可落地的特征与验收口径。
2. 解释这些指标在加密市场中更可能反映什么（噪声/制度/延迟反应），以及最常见的工程陷阱。
3. 给出本仓库的落地路径：研究层离线验证 → 输出 policy → 执行层消费（风险预算/门控）。

> 范围声明（重要）：  
> 本项目当前主线为**单交易对时间序列预测/择时**。本文提到的“信息流网络/跨币信息传导”等内容仅作背景校准，不作为近期落地目标。

---

## 0) 一句话结论

信息论指标的价值通常不是“直接给买卖点”，而是更像**噪声/可预测性/信息延迟**的量化度量：先把它们做成单币的“软风险预算/门控特征”，用滚动窗口与成本敏感评估验证稳定性，再决定是否进入策略主路径。

---

## 1) Shannon 熵：用来度量“序列有多不可预测”

Shannon 熵用于度量离散随机变量的不确定性 [1][2]。落地到交易时，常见做法不是对“价格”求熵，而是对“收益/方向/波动状态”等离散化后的序列求熵。

### 1.1 工程化定义（单币可落地）

建议的三种序列口径（从稳健到敏感）：

1. **方向序列**：`sign(ret)` 离散为 {-1, 0, +1} 或 {-1, +1}（更稳健，但信息量有限）。
2. **分桶收益**：把 `ret` 分成 B 个分位桶（信息量更高，但对样本量敏感）。
3. **波动状态**：用波动率分位把状态离散化（更像“风险体制”特征）。

计算方式（窗口化）：

- 对每个滚动窗口（例如 N 根 K 线），统计离散状态频率 `p(s)`，计算 `H = -sum p(s) log p(s)`。
- 为便于跨窗口比较，建议记录**归一化熵**：`H_norm = H / log(B)`（B 为状态数）。

### 1.2 工程注意事项（很容易踩坑）

1. **样本量下限**：桶数 B 越大，对窗口长度 N 的要求越高；N 不足会导致熵的估计偏差很大。
2. **分桶口径必须锁死**：分位桶的边界只能用训练期统计得到，并在验证/实盘复用；否则会发生隐性泄漏。
3. **不要对价格水平求熵**：价格非平稳，会让熵指标“看起来很强但不可解释”。

### 1.3 如何用于单交易对策略

更推荐的使用方式：

- **风险预算（Soft）**：熵高（更随机/更噪声）→ 降杠杆/降仓位/减少新开仓；熵低 → 允许更积极的仓位（仍需配合趋势/波动约束）。
- **门控（Gate）**：极端高熵窗口直接禁新开（阈值需离线校准，避免误触）。

---

## 2) Transfer Entropy：用来检测“信息是否有方向性地流动”

Transfer Entropy（转移熵）用于衡量“给定历史后，加入 X 的历史是否能额外降低 Y 的不确定性”，属于有向的信息流度量 [3][4]。

在“单交易对主线”下，它更适合作为：

- 离线研究指标：验证某个外生信号（情绪、宏观、资金费率等）是否对该币对存在稳定的领先信息；
- 风险监控：当信息流结构发生变化时，提示制度切换或信号失效。

### 2.1 最小可复现实现（离散化 + 滚动窗）

常见可复现流程（与文献常见做法一致）[3]：

1. 选择目标变量 Y：通常是收益或收益方向（建议对 `log-return` 或 `delta log price`）。
2. 选择驱动变量 X：情绪分数、新闻强度、资金费率等（外部数据）。
3. 选定滞后 k：例如 k=1 小时或 k=1 根 K 线（需要按你的 timeframe 对齐）。
4. 在每个滚动窗口内离散化 `X_{t-k}`、`Y_{t-1}`、`Y_t`，估计联合分布并计算 TE。
5. 显著性检验：对 X 做 shuffle 生成 TE 的零分布，计算 Z-score（或 p-value）[3]。

### 2.2 工程注意事项

1. **TE 非常吃样本量**：窗口太短会导致离散化估计极不稳定；窗口太长又会平滑掉制度切换。需要用滚动稳定性做权衡。
2. **时间对齐是硬门槛**：情绪/资金费率的时间戳、时区、采样频率必须与 K 线严格对齐，否则 TE 结果没有意义。
3. **Z-score 不是交易信号**：TE 显著只能说明“存在信息增益”，不代表“方向可交易/成本后为正”。

---

## 3) 重尾分布：为什么“波动与尾部风险”更重要

多项研究显示加密收益分布显著偏离正态，呈重尾（例如 Student-t 拟合更优）[1][2]。工程含义是：

- 用均值/方差刻画风险往往不够；应更重视尾部与极端风险（例如 CVaR、极值/分位）。
- 训练与评估更容易被极端样本主导：需要稳健损失、分位回放与制度分段。

本仓库落地建议：

- 把“尾部风险”当作风险预算的主输入（见 `docs/knowledge/crypto_risk_factors_engineering_playbook.md` 中对波动/尾部/清算级联的落地建议）。

---

## 4) 复杂度-熵平面（CECP）：把“噪声类型”当作体制变量

文献中存在用复杂度-熵平面将序列划分为混沌/随机/有色噪声等区域的研究线索 [7][8]。在单交易对主线下，它更适合被当作：

- **体制标签**：用来决定“该段行情更像趋势可预测还是噪声不可预测”，进而切换模型/阈值/风险预算；
- **冷启动与成熟度提示**：新币历史短时，许多统计量会不稳定（不建议强行上复杂模型）。

工程提醒：

- 这类指标计算复杂、对参数敏感；建议先作为离线诊断/可视化，不要直接进入实盘主路径。

---

## 5) 系统视角：市场效率、链上系统与信息流网络（背景）

以下内容更偏“解释与校准”，不作为当前主线落地目标：

- 市场效率量化（例如把收益分布贴合程度映射为效率指标）的研究线索 [9]。
- 区块链吞吐/交易池的最大熵建模（更偏系统性能与费用机制）[10]。
- 多变量转移熵网络用于系统性风险预警（需要多资产与更完整的数据）[11][12]。
- 消息反应窗口的不对称性（利好/利空反应时滞差异）作为“延迟套利”线索 [14]。

---

## 6) 落地到本仓库（单交易对时间序列）

### 6.1 P0（仅 OHLCV）：先做“熵/复杂度的弱代理”

在不引入外部数据的前提下，更推荐先做：

- 收益方向熵/分桶熵（滚动窗口特征）
- 波动状态熵（把波动率离散化后的熵）
- 与既有特征组合：`ret_*`、`vol_*`、`skew_*`、`kurt_*`、`volume_z_*`、`ema_spread`（见 `04_shared/config/factors.yaml`）

并用本仓库已有的研究入口做验收：

- 单币择时体检：`scripts/qlib/timing_audit.py`（滚动稳定性 + 成本后收益）
- 预测模型工程验收：`docs/knowledge/crypto_price_forecasting_models_playbook.md`

### 6.2 P2（外部数据）：再谈 TE（情绪/资金费率/宏观）

若要把 TE 用于“实战信号提取”，必须先解决：

1. 数据源许可与落盘（情绪/资金费率/新闻）
2. 时间对齐（时区、频率、缺失）
3. 可复现评估（walk-forward + 成本敏感）

---

## 7) 来源（已登记到 `docs/knowledge/source_registry.md`）

- [1] https://arxiv.org/pdf/2210.02633.pdf（S-1013）
- [2] https://www.mdpi.com/1099-4300/24/11/1583/pdf?version=1667289176（S-1014）
- [3] https://arxiv.org/pdf/1906.05740.pdf（S-1015）
- [4] https://pmc.ncbi.nlm.nih.gov/articles/PMC7540793/（S-1016）
- [7] https://www.mdpi.com/1099-4300/27/4/450（S-1017）
- [8] https://pmc.ncbi.nlm.nih.gov/articles/PMC12027155/（S-1018）
- [9] https://www.nature.com/articles/s41598-023-31618-4（S-1019）
- [10] https://arxiv.org/pdf/2309.04959.pdf（S-1020）
- [11] https://res.mdpi.com/d_attachment/entropy/entropy-22-00760/article_deploy/entropy-22-00760.pdf（S-1021）
- [12] http://arxiv.org/pdf/2111.09057.pdf（S-1022）
- [14] https://www.mdpi.com/1099-4300/27/12/1234（S-1023）

