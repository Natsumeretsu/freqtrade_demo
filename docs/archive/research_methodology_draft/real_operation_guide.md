# 实操月度计划与日常监控指南

## 第一部分：DGT的完整5周部署计划

### 第1周：初始化与验证

**Step 1: 选择币种**
```
推荐排序：
1. ETH/USDT - 历史波动率10-15% (最优)
2. SOL/USDT - 历史波动率15-20% (次优)
3. BTC/USDT - 历史波动率5-10% (保守)

原因：波动率越高，网格触发频率越高，利润机会越多
```

**Step 2: 参数配置**
```
对于$10 + ETH/USDT：

当前价格：$3,500 (假设)

DGT参数：
- grid_size: 0.02 (2% 必须)
- grid_half: 10 (10层上10层下)
- 中心价: $3,500
- 上限: $3,500 × 1.02^10 = $4,280
- 下限: $3,500 × 0.98^10 = $2,860
- 范围: $1,420 (约40%)

初始持仓：
- $5买入0.00143 ETH (@$3,500)
- $5保留为USDT
```

**Step 3: 回测验证（关键！）**
```bash
freqtrade backtesting \
  --strategy DGTStrategy \
  --pair ETH/USDT:USDT \
  --timeframe 1h \
  --timerange 20240101-20241231 \
  --dry-run-wallet 10 \
  --stake-amount 10

预期结果：
✓ Total Profit: 15-30% ($10→$11.50-$13)
✓ Max Drawdown: < 40%
✓ Win Rate: > 80%
✓ Trade Count: 200-400笔/年

如果未达到，调整参数并重新回测
```

### 第2-4周：纸面交易验证

**配置Freqtrade模拟模式**
```json
{
  "dry_run": true,
  "stake_currency": "USDT",
  "dry_run_wallet": 10,
  "trading_mode": "spot",
  "exchange": {
    "name": "okx",
    "pair_whitelist": ["ETH/USDT"]
  }
}
```

**连续运行3周，监控指标**
```
每周末检查：
□ 本周交易数: 2-5笔 (正常频率)
□ 本周利润: +0.3-0.8% (预期)
□ 最大连续亏损: < $0.30 (可接受)
□ 保证金率: > 100% (现货无杠杆，始终100%)

三周都符合 → 进入实盘
否则 → 返回调整参数
```

### 第5周+：实盘交易

**初始入金：$10**
```
OKX账户设置：
1. 创建子账户（安全）
2. 转入$10 USDT
3. 设置API (仅交易权限)
4. 启用IP白名单
5. 启用2FA
```

**Freqtrade配置改为真实账户**
```json
{
  "dry_run": false,
  "stake_currency": "USDT",
  "trading_mode": "spot",
  "exchange": {
    "name": "okx",
    "key": "YOUR_API_KEY",
    "secret": "YOUR_SECRET",
    "password": "YOUR_OKX_PASSWORD",
    "pair_whitelist": ["ETH/USDT"]
  }
}
```

**启动实盘机器人**
```bash
freqtrade trade \
  --strategy DGTStrategy \
  --config user_data/config.json \
  --userdir user_data \
  --logfile logs/dgt.log

# 后台运行
nohup freqtrade trade ... > logs/dgt.log 2>&1 &
```

---

## 第二部分：RSI+MACD的完整5周部署计划

### 第1周：学习与参数理解

**理解三层确认机制**
```
Layer 1 - MACD (趋势确认):
✓ MACD线穿过信号线向上 = 买入信号
✗ MACD线穿过信号线向下 = 卖出信号

Layer 2 - RSI (动量确认):
✓ RSI从<30反弹或在30-70之间向上 = 买入信号
✗ RSI从>70下跌或在70-30之间向下 = 卖出信号

Layer 3 - SMA (趋势过滤):
✓ 价格>SMA20 = 看涨环境
✗ 价格<SMA20 = 看跌环境

只有三层都一致时，才执行交易！
```

**图表上的实际例子**
```
图1：完美的做多信号
时间: 08:00
事件1：价格$40,000 > SMA20($39,500) ✓
事件2：RSI从25上升到35 ✓
事件3：MACD线穿过信号线向上 ✓
→ 买入信号！

结果：价格上升到$40,800，利润$80 (0.2%)

图2：虚假信号（缺少一层确认）
时间：10:00
事件1：价格$40,100 > SMA20 ✓
事件2：RSI从25上升到35 ✓
事件3：MACD仍在信号线下方 ✗
→ 跳过，不交易！（避免虚假信号）
```

### 第2周：回测与参数优化

**完整回测**
```bash
freqtrade backtesting \
  --strategy RSIMACDStrategy \
  --pair SOL/USDT:USDT \
  --timeframe 1h \
  --timerange 20240101-20241231 \
  --dry-run-wallet 10 \
  --stake-amount 0.5 \
  --max-open-trades 3

预期结果：
✓ Win Rate: 65-73%
✓ Profit Factor: 1.8-2.2
✓ Avg Profit: 0.75-0.88% per trade
✓ Total Profit: 60-150%
✓ Max Drawdown: 8-15%

如果不符合，调整参数并重新回测
```

**参数调整示例**
```python
# 如果胜率太低，尝试以下调整：

# 调整1：更严格的RSI确认
rsi_oversold = 25  # 从30降低到25
rsi_overbought = 75  # 从70提高到75
# 效果：信号更少但质量更高

# 调整2：更长的SMA (更强的趋势过滤)
sma_period = 50  # 从20增加到50
# 效果：减少虚假信号，但可能错过一些机会

# 最终找到的最优参数（需要Hyperopt）
# RSI: 14周期，28超卖，72超买
# MACD: 12/26/9（标准）
# SMA: 22周期
```

### 第3-4周：纸面交易

**模拟交易3周**
```
目标：验证策略稳定性和自己的执行纪律

每天监控：
□ 生成的买入信号数: 1-3 (正常)
□ 实际交易笔数: 0.5-1 (不是所有信号都成交)
□ 已平仓交易利润: 平均+0.7-0.9%
□ 未平仓头寸: 浮动利润 +/-1-2%

周末汇总：
□ 本周总交易: 3-5笔
□ 本周利润: 预期+2-4%
□ 胜率: 70-75%
□ 最大单笔亏损: -0.5%以内

三周都达到预期 → 进入实盘
```

### 第5周+：实盘交易

**初始设置**
```
OKX账户（同DGT）：
- 子账户：$10 USDT
- API配置：交易权限仅
- 交易对：SOL/USDT （最高波动）

Freqtrade配置：
- stake_amount: 0.5 ($10的5%)
- max_open_trades: 3
- stoploss: -0.05 (5%)
```

**机器人启动**
```bash
freqtrade trade \
  --strategy RSIMACDStrategy \
  --config user_data/config.json \
  --logfile logs/rsi_macd.log

# 监控日志
tail -f logs/rsi_macd.log

# 预期每小时输出：
# INFO - Strategy: New Buy Signal on SOL/USDT at price 150.2
# INFO - Strategy: Sell Signal, Closing position with +0.87% profit
```

---

## 第三部分：月度增长计划与调整

### DGT的月度目标

```
Month 1: $10初始
- 本月利润预期: 1.5-2%
- 月末预期: $10.15-$10.20
- 加入本金: +$5
- 新月初基础: $15.15-$15.20

Month 2-3: 重复，小幅加速
Month 4-6: 月增长2-2.5%
Month 7-12: 月增长2.5-3%
Month 12: 账户规模 $80-100

加入本金策略：
- 前3个月: 每月$5
- 第4-6个月: 每月$10
- 第7-12个月: 每月$20-30
```

### RSI+MACD的月度目标

```
Month 1: $10初始
- 本月交易: 约15笔
- 本月利润: 8-13%
- 月末预期: $10.80-$11.30
- 加入本金: +$10
- 新月初基础: $20.80-$21.30

Month 2-3: 月增长10-15%
Month 4-6: 月增长12-15%
Month 7-12: 月增长10-12%
Month 12: 账户规模 $150-200

加入本金策略：
- 前6个月: 每月$10-15
- 第7-12个月: 每月$20-50
```

---

## 第四部分：日常监控与风险管理

### 每日检查清单（RSI+MACD）

```
交易前：
□ 市场状态（无重大新闻否则跳过）
□ BTC/USDT整体趋势（看大时间框架）
□ 选定币种最近4小时图 (检查是否有信号)
□ 当前账户利用率 (应<70%)

交易中：
□ 确保三层信号一致（MACD+RSI+SMA）
□ 输入正确的止损和止盈
□ 头寸大小不超过账户5%
□ 记录交易原因（后续复盘用）

交易后：
□ 平仓时是否达到目标 (10% 或自然止损/止盈)
□ 实际利润是否≈预期
□ 是否有可改进的地方
```

### 周末复盘表（RSI+MACD）

```
复盘数据：
□ 本周交易笔数：___笔（目标4-6笔）
□ 本周胜率：___% （目标>70%）
□ 本周平均利润：___% per trade （目标>0.8%）
□ 本周总利润：___% （目标2-4%）
□ 最大连续亏损：___笔 （监控心理压力）
□ 有无虚假信号导致亏损：___笔

判断标准：
✓ 胜率>70% + 周利润>2% → 继续
~ 胜率60-70% 或 周利润1-2% → 监控
✗ 胜率<60% 或 周利润<1% → 需要调整参数

调整建议：
- 如果虚假信号多 → 提高RSI水位（70→75）
- 如果错过机会多 → 降低RSI水位（30→25）
- 如果频繁小亏 → 提高SMA周期（20→25）
```

### 周检查清单（DGT）

```
☐ 账户余额是否增加（至少+0.3%)
☐ 未平仓头寸浮动利润 (应该>0或接近0)
☐ 本周交易笔数 (应该2-5笔)
☐ API连接是否正常 (无红色告警)
☐ 网格参数是否仍适合当前币价
☐ 保证金率是否充足 (>100% 现货中自动满足)

异常情况：
✗ 一周内无交易 → 网格范围设置过大，需调整
✗ 频繁亏损 → 费用太高或参数不合，检查
✗ API错误 → 重启机器人或检查连接
```

---

## 第五部分：风险管理规则

### 破产保护规则

```
规则1：单笔风险≤账户1%
例子：$10账户 → 每笔亏损最多$0.10

规则2：日最大亏损≤账户3%
例子：$10账户 → 一天亏损最多$0.30

规则3：周最大亏损≤账户5%
例子：$10账户 → 一周亏损最多$0.50

规则4：月最大亏损≤账户10%
例子：$10账户 → 一个月亏损最多$1.00

触发止损规则：
✗ 如果日亏损超过3% → 停止交易，分析问题
✗ 如果周亏损超过5% → 减少头寸大小50%
✗ 如果月亏损超过10% → 停止所有交易，重新学习
```

### API安全检查清单

```
账户创建：
□ 使用子账户而不是主账户
□ 设置API IP白名单（只允许你的服务器IP）
□ 禁用"提现"权限（仅启用"交易"）
□ 启用2FA双因素认证
□ 设置API的独立密码（与账户密码不同）

定期检查：
□ 每周检查API访问日志（无异常交易否）
□ 每月检查账户余额（是否少了无法解释的USDT）
□ 定期更换API密钥（每3个月）
```

### 机器人宕机应急方案

```
如果Freqtrade机器人停机：

Step 1：立即登录OKX检查账户
- 是否有未平仓头寸？
- 是否触发了止损？

Step 2：如果有未平仓头寸
- 检查是否达到止盈（可选平仓）
- 检查是否接近止损（考虑手动平仓）

Step 3：确定宕机原因
- 网络连接问题？ → 重启机器人
- API错误？ → 检查OKX是否故障
- 代码错误？ → 检查日志文件

Step 4：重新启动
freqtrade trade --strategy DGTStrategy --config config.json

建议：
- 在可靠的VPS上运行（不是个人PC）
- 设置监控告警（如Telegram）
```

---

## 第六部分：常见问题与解决方案

### DGT常见错误与修复

| 错误 | 症状 | 修复方案 |
|-----|-----|--------|
| 网格太大 | 一个月内无交易 | grid_size从0.02改到0.015 |
| 网格太小 | 利润被费用吃掉 | grid_size从0.02改到0.025 |
| 币种选错 | 一个月无波动 | 从BTC换到ETH或SOL |
| 参数旧了 | 最近1个月利润下降50% | 运行新的回测，优化参数 |
| 机器人卡住 | 日志停止更新 | 重启机器人（kill后重启） |

### RSI+MACD常见错误与修复

| 错误 | 症状 | 修复方案 |
|-----|-----|--------|
| 虚假信号多 | 胜率下降到50%以下 | 提高RSI超卖到25（从30）或超买到75（从70） |
| 错过机会 | 看不到信号 | 降低RSI，从35变成25 |
| 小亏损很多 | 止损频繁触发 | 提高SMA周期从20到25或30 |
| 利润无法拿住 | 早早止盈 | 改变出场规则：让RSI到70才出，不要2%就跑 |
| 连续亏损 | 心理崩溃 | 检查市场是否进入盘整，暂停交易直到有明确趋势 |

---

这是完整的实操指南。遵循这个计划，你可以在5周内从零开始实盘交易！
