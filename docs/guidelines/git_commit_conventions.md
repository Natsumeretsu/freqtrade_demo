# Git 提交规范

更新日期：2026-01-17

## 1. 提交信息格式

### 1.1 基本格式

```
<类型>: <简短描述>

[可选的详细说明]

[可选的关联 Issue]
```

### 1.2 类型说明

| 类型 | 说明 | 示例 |
|------|------|------|
| `feat` | 新功能 | `feat: 添加 MACD 金叉死叉信号` |
| `fix` | 修复 bug | `fix: 修复回测中的时间对齐问题` |
| `docs` | 文档更新 | `docs: 更新策略参数说明` |
| `style` | 代码格式 | `style: 统一代码缩进格式` |
| `refactor` | 重构 | `refactor: 简化信号生成逻辑` |
| `test` | 测试 | `test: 添加 RSI 计算单元测试` |
| `chore` | 构建/工具 | `chore: 更新依赖版本` |
| `perf` | 性能优化 | `perf: 优化指标计算性能` |

---

## 2. 提交原则

### 2.1 原子性提交

**每次提交只做一件事**：
- ✅ 好：`fix: 修复 EMA 计算中的空值处理`
- ❌ 差：`fix: 修复多个 bug 并添加新功能`

### 2.2 完整性

**提交的代码应该是可运行的**：
- 不提交半成品代码
- 确保测试通过
- 确保不破坏现有功能

### 2.3 描述清晰

**简短描述（50 字符内）**：
- 使用祈使句：`添加` 而不是 `添加了`
- 说明做了什么，不说明怎么做
- 中文描述

**详细说明（可选）**：
- 说明为什么做这个改动
- 说明改动的影响范围
- 提供相关背景信息

---

## 3. 提交示例

### 3.1 简单提交

```bash
git commit -m "feat: 添加 RSI 超买超卖信号"
```

### 3.2 详细提交

```bash
git commit -m "fix: 修复回测中的时间对齐问题

问题：
- 回测结果与实盘不一致
- 信号生成时间偏移 1 个周期

解决方案：
- 使用 shift(1) 避免未来数据泄露
- 统一时间戳对齐逻辑

影响范围：
- 所有使用 populate_entry_trend 的策略
- 回测结果可能发生变化

相关 Issue: #123"
```

---

## 4. 分支管理

### 4.1 分支命名

**格式**：`<类型>/<简短描述>`

**示例**：
- `feat/add-rsi-signal`
- `fix/backtest-time-alignment`
- `docs/update-strategy-guide`

### 4.2 分支策略

**主分支**：
- `main`: 生产环境代码
- `develop`: 开发环境代码

**功能分支**：
- 从 `develop` 创建
- 完成后合并回 `develop`
- 合并后删除

---

## 5. 检查清单

提交前检查：

- [ ] 提交信息格式正确
- [ ] 提交类型准确
- [ ] 简短描述清晰（≤50 字符）
- [ ] 代码已测试通过
- [ ] 不包含调试代码
- [ ] 不包含敏感信息
- [ ] 相关文档已更新

---

## 6. 常见错误

### 6.1 避免的提交信息

❌ `update`（太模糊）
❌ `fix bug`（没说明修复了什么）
❌ `WIP`（不应提交半成品）
❌ `修复了一些问题并添加了新功能`（一次提交做多件事）

### 6.2 正确的提交信息

✅ `feat: 添加布林带突破信号`
✅ `fix: 修复 EMA 计算中的除零错误`
✅ `docs: 更新回测报告标准`
✅ `refactor: 提取公共指标计算函数`
